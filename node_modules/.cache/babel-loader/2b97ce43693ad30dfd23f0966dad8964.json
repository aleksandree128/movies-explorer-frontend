{"ast":null,"code":"class MainApi {\n  constructor(_ref) {\n    let {\n      baseUrl\n    } = _ref;\n    this._baseUrl = baseUrl;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(`Ошибка: ${res.status}`);\n    }\n  }\n\n  registration(_ref2) {\n    let {\n      name,\n      email,\n      password\n    } = _ref2;\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name,\n        email,\n        password\n      })\n    }).then(res => this._checkResponse(res));\n  }\n\n  login(_ref3) {\n    let {\n      password,\n      email\n    } = _ref3;\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        password: password,\n        email: email\n      })\n    }).then(res => this._checkResponse(res));\n  }\n\n  getUserData(jwt) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => this._checkResponse(res));\n  }\n\n  editProfile(info) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        name: info.name,\n        email: info.email\n      })\n    }).then(this._checkResponse);\n  }\n\n  getMovies() {\n    return fetch(`${this._baseUrl}/movies`, {\n      method: \"GET\",\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => this._checkResponse(res));\n  }\n\n  addMovie(movie) {\n    return fetch(`${this._baseUrl}/movies`, {\n      method: \"POST\",\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        country: movie.country,\n        director: movie.director,\n        duration: movie.duration,\n        year: movie.year,\n        description: movie.description,\n        image: 'https://api.nomoreparties.co' + movie.image.url,\n        trailerLink: movie.trailerLink,\n        thumbnail: 'https://api.nomoreparties.co' + movie.thumbnail,\n        movieId: movie.id,\n        nameRU: movie.nameRU,\n        nameEN: movie.nameEN\n      })\n    }).then(this._checkResponse);\n  }\n\n  deleteMovie(movieId) {\n    return fetch(`${this._baseUrl}/movies/${movieId}`, {\n      method: \"DELETE\",\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('jwt')}`,\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(this._checkResponse);\n  }\n\n}\n\nexport const mainApi = new MainApi({\n  baseUrl: \"http://api.korshinov.diplom.nomoredomains.sbs\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n    \"Accept\": \"application/json\"\n  }\n});","map":{"version":3,"names":["MainApi","constructor","baseUrl","_baseUrl","_checkResponse","res","ok","json","Promise","reject","status","registration","name","email","password","fetch","method","headers","body","JSON","stringify","then","login","getUserData","jwt","authorization","localStorage","getItem","editProfile","info","getMovies","addMovie","movie","country","director","duration","year","description","image","url","trailerLink","thumbnail","movieId","id","nameRU","nameEN","deleteMovie","mainApi"],"sources":["C:/Users/aleks/dev/movies-explorer-frontend/src/utils/MainApi.js"],"sourcesContent":["class MainApi {\r\n    constructor({ baseUrl }) {\r\n        this._baseUrl = baseUrl;\r\n    }\r\n\r\n    _checkResponse(res) {\r\n        if (res.ok) {\r\n            return res.json();\r\n        } else {\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        }\r\n    }\r\n\r\n    registration({ name, email, password }) {\r\n        return fetch(`${this._baseUrl}/signup`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({ name, email, password }),\r\n        }).then((res) => this._checkResponse(res));\r\n    }\r\n\r\n    login({ password, email }) {\r\n        return fetch(`${this._baseUrl}/signin`, {\r\n            method: \"POST\",\r\n            headers: { \"Content-Type\": \"application/json\" },\r\n            body: JSON.stringify({\r\n                password: password,\r\n                email: email,\r\n            }),\r\n        }).then((res) => this._checkResponse(res));\r\n    }\r\n\r\n    getUserData(jwt) {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            method: \"GET\",\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        }).then((res) => this._checkResponse(res));\r\n    }\r\n\r\n    editProfile(info) {\r\n        return fetch(`${this._baseUrl}/users/me`, {\r\n            method: \"PATCH\",\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                name: info.name,\r\n                email: info.email,\r\n            }),\r\n        }).then(this._checkResponse);\r\n    }\r\n\r\n    getMovies(){\r\n        return fetch(`${this._baseUrl}/movies`, {\r\n            method: \"GET\",\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        }).then((res) => this._checkResponse(res));\r\n    }\r\n\r\n    addMovie(movie){\r\n        return fetch(`${this._baseUrl}/movies`, {\r\n            method: \"POST\",\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n            body: JSON.stringify({\r\n                country: movie.country,\r\n                director: movie.director,\r\n                duration: movie.duration,\r\n                year: movie.year,\r\n                description: movie.description,\r\n                image: 'https://api.nomoreparties.co' + movie.image.url,\r\n                trailerLink: movie.trailerLink,\r\n                thumbnail: 'https://api.nomoreparties.co' + movie.thumbnail,\r\n                movieId: movie.id,\r\n                nameRU: movie.nameRU,\r\n                nameEN: movie.nameEN,\r\n            }),\r\n        }).then(this._checkResponse);\r\n    }\r\n\r\n    deleteMovie(movieId){\r\n        return fetch(`${this._baseUrl}/movies/${movieId}`, {\r\n            method: \"DELETE\",\r\n            headers: {\r\n                authorization: `Bearer ${localStorage.getItem('jwt')}`,\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        }).then(this._checkResponse);\r\n    }\r\n}\r\n\r\nexport const mainApi = new MainApi({\r\n    baseUrl: \"http://api.korshinov.diplom.nomoredomains.sbs\",\r\n    headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        \"Accept\": \"application/json\",\r\n    },\r\n});\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}