{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aleks\\\\dev\\\\movies-explorer-frontend\\\\src\\\\components\\\\MovieCardsLists\\\\MovieCardsLists.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport \"../MovieCardsLists/movieCardsLists.css\";\nimport MoviesCard from \"../MovieCards/MovieCards\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction MovieCardsLists(_ref) {\n  _s();\n\n  let {\n    nothingFound = true,\n    moviesList = [],\n    onSaveClick = false,\n    onDeleteClick = false,\n    savedMoviesList = [],\n    savedMoviesPage = false\n  } = _ref;\n  const [movieList, setMovieList] = React.useState([]);\n  const [cardsShowDetails, setCardsShowDetails] = React.useState({\n    total: 12,\n    extra: 3\n  });\n  const [isMount, setIsMount] = React.useState(true);\n  const getScreenWidth = React.useCallback(() => window.innerWidth, []);\n  const [screenWidth, setScreenWidth] = React.useState(getScreenWidth());\n  const moviesCount = {\n    bigScreen: {\n      width: 1280,\n      cards: {\n        total: 12,\n        extra: 3\n      }\n    },\n    normalScreen: {\n      width: 768,\n      cards: {\n        total: 8,\n        extra: 2\n      }\n    },\n    smallScreen: {\n      width: 480,\n      cards: {\n        total: 5,\n        extra: 2\n      }\n    }\n  };\n  React.useEffect(() => {\n    function handleScreenResize() {\n      setScreenWidth(getScreenWidth());\n    }\n\n    window.addEventListener(\"resize\", resizeController, false);\n    let resizeTimer;\n\n    function resizeController() {\n      if (!resizeTimer) {\n        resizeTimer = setTimeout(() => {\n          resizeTimer = null;\n          handleScreenResize();\n        }, 1000);\n      }\n    }\n\n    return () => window.removeEventListener(\"resize\", handleScreenResize);\n  }, [getScreenWidth]);\n  React.useEffect(() => {\n    if (screenWidth >= moviesCount.bigScreen.width) {\n      setCardsShowDetails(moviesCount.bigScreen.cards);\n    } else if (screenWidth <= moviesCount.bigScreen.width && screenWidth > moviesCount.normalScreen.width) {\n      setCardsShowDetails(moviesCount.normalScreen.cards);\n    } else {\n      setCardsShowDetails(moviesCount.smallScreen.cards);\n    }\n\n    return () => setIsMount(false);\n  }, [screenWidth, isMount]);\n\n  function handleClickElse() {\n    const start = movieList.length;\n    const end = start + cardsShowDetails.extra;\n    const additional = moviesList.length - start;\n\n    if (additional > 0) {\n      const newCards = moviesList.slice(start, end);\n      setMovieList([...movieList, ...newCards]);\n    }\n  }\n\n  React.useEffect(() => {\n    if (moviesList.length) {\n      const res = moviesList.filter((item, i) => i < cardsShowDetails.total);\n      setMovieList(res);\n    }\n  }, [moviesList, savedMoviesPage, cardsShowDetails.total]);\n\n  function getSavedMovieCard(savedMoviesList, movie) {\n    return savedMoviesList.find(savedMovie => savedMovie.movieId === movie.id);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"movieCardsLists\",\n    children: /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: nothingFound ? /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"moviesCardList__notFound\",\n        children: \"\\u041D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"movieCardsLists__elements\",\n          children: movieList.map(movie => /*#__PURE__*/_jsxDEV(MoviesCard, {\n            saved: getSavedMovieCard(savedMoviesList, movie),\n            movie: movie,\n            onSaveClick: onSaveClick,\n            onDeleteClick: onDeleteClick,\n            savedMoviesPage: savedMoviesPage\n          }, movie.id || movie._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this), movieList.length >= 5 && movieList.length < moviesList.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"moviesCardList__else\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"moviesCardList__btn\",\n            onClick: handleClickElse,\n            children: \"\\u0415\\u0449\\u0451\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 29\n        }, this) : \"\"]\n      }, void 0, true)\n    }, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MovieCardsLists, \"Dl5XpxDoz5z9Yle8LEznvS9iwGE=\");\n\n_c = MovieCardsLists;\nexport default MovieCardsLists;\n\nvar _c;\n\n$RefreshReg$(_c, \"MovieCardsLists\");","map":{"version":3,"names":["React","MoviesCard","MovieCardsLists","nothingFound","moviesList","onSaveClick","onDeleteClick","savedMoviesList","savedMoviesPage","movieList","setMovieList","useState","cardsShowDetails","setCardsShowDetails","total","extra","isMount","setIsMount","getScreenWidth","useCallback","window","innerWidth","screenWidth","setScreenWidth","moviesCount","bigScreen","width","cards","normalScreen","smallScreen","useEffect","handleScreenResize","addEventListener","resizeController","resizeTimer","setTimeout","removeEventListener","handleClickElse","start","length","end","additional","newCards","slice","res","filter","item","i","getSavedMovieCard","movie","find","savedMovie","movieId","id","map","_id"],"sources":["C:/Users/aleks/dev/movies-explorer-frontend/src/components/MovieCardsLists/MovieCardsLists.js"],"sourcesContent":["import React from \"react\";\r\nimport \"../MovieCardsLists/movieCardsLists.css\";\r\nimport MoviesCard from \"../MovieCards/MovieCards\";\r\n\r\nfunction MovieCardsLists({\r\n    nothingFound = true,\r\n    moviesList = [],\r\n    onSaveClick = false,\r\n    onDeleteClick = false,\r\n    savedMoviesList = [],\r\n    savedMoviesPage = false,\r\n}) {\r\n    const [movieList, setMovieList] = React.useState([]);\r\n    const [cardsShowDetails, setCardsShowDetails] = React.useState({\r\n        total: 12,\r\n        extra: 3,\r\n    });\r\n    const [isMount, setIsMount] = React.useState(true);\r\n    const getScreenWidth = React.useCallback(() => window.innerWidth, []);\r\n    const [screenWidth, setScreenWidth] = React.useState(getScreenWidth());\r\n    const moviesCount = {\r\n        bigScreen: { width: 1280, cards: { total: 12, extra: 3 } },\r\n        normalScreen: { width: 768, cards: { total: 8, extra: 2 } },\r\n        smallScreen: { width: 480, cards: { total: 5, extra: 2 } },\r\n    };\r\n    React.useEffect(() => {\r\n        function handleScreenResize() {\r\n            setScreenWidth(getScreenWidth());\r\n        }\r\n        window.addEventListener(\"resize\", resizeController, false);\r\n        let resizeTimer;\r\n        function resizeController() {\r\n            if (!resizeTimer) {\r\n                resizeTimer = setTimeout(() => {\r\n                    resizeTimer = null;\r\n                    handleScreenResize();\r\n                }, 1000);\r\n            }\r\n        }\r\n        return () => window.removeEventListener(\"resize\", handleScreenResize);\r\n    }, [getScreenWidth]);\r\n\r\n    React.useEffect(() => {\r\n        if (screenWidth >= moviesCount.bigScreen.width) {\r\n            setCardsShowDetails(moviesCount.bigScreen.cards);\r\n        } else if (\r\n            screenWidth <= moviesCount.bigScreen.width &&\r\n            screenWidth > moviesCount.normalScreen.width\r\n        ) {\r\n            setCardsShowDetails(moviesCount.normalScreen.cards);\r\n        } else {\r\n            setCardsShowDetails(moviesCount.smallScreen.cards);\r\n        }\r\n        return () => setIsMount(false);\r\n    }, [screenWidth, isMount]);\r\n\r\n    function handleClickElse() {\r\n        const start = movieList.length;\r\n        const end = start + cardsShowDetails.extra;\r\n        const additional = moviesList.length - start;\r\n\r\n        if (additional > 0) {\r\n            const newCards = moviesList.slice(start, end);\r\n            setMovieList([...movieList, ...newCards]);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (moviesList.length) {\r\n            const res = moviesList.filter(\r\n                (item, i) => i < cardsShowDetails.total\r\n            );\r\n            setMovieList(res);\r\n        }\r\n    }, [moviesList, savedMoviesPage, cardsShowDetails.total]);\r\n\r\n    function getSavedMovieCard(savedMoviesList, movie) {\r\n        return savedMoviesList.find(\r\n            (savedMovie) => savedMovie.movieId === movie.id\r\n        );\r\n    }\r\n    return (\r\n        <section className=\"movieCardsLists\">\r\n            <>\r\n                {nothingFound ? (\r\n                    <p className=\"moviesCardList__notFound\">\r\n                        Ничего не найдено.\r\n                    </p>\r\n                ) : (\r\n                    <>\r\n                        <div className=\"movieCardsLists__elements\">\r\n                            {movieList.map((movie) => (\r\n                                <MoviesCard\r\n                                    saved={getSavedMovieCard(\r\n                                        savedMoviesList,\r\n                                        movie\r\n                                    )}\r\n                                    key={movie.id || movie._id}\r\n                                    movie={movie}\r\n                                    onSaveClick={onSaveClick}\r\n                                    onDeleteClick={onDeleteClick}\r\n                                    savedMoviesPage={savedMoviesPage}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                        {movieList.length >= 5 &&\r\n                        movieList.length < moviesList.length ? (\r\n                            <div className=\"moviesCardList__else\">\r\n                                <button\r\n                                    className=\"moviesCardList__btn\"\r\n                                    onClick={handleClickElse}\r\n                                >\r\n                                    Ещё\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            \"\"\r\n                        )}\r\n                    </>\r\n                )}\r\n            </>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default MovieCardsLists;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}